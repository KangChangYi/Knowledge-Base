<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>零碎知识点 | 特辣的博客</title>
    <meta name="description" content="Step by step">
    
    
    <link rel="preload" href="/assets/css/0.styles.98303e98.css" as="style"><link rel="preload" href="/assets/js/app.9bc466e0.js" as="script"><link rel="preload" href="/assets/js/2.bc0da09f.js" as="script"><link rel="preload" href="/assets/js/25.95bb47b2.js" as="script"><link rel="prefetch" href="/assets/js/10.7f9b2c60.js"><link rel="prefetch" href="/assets/js/11.b7ec9672.js"><link rel="prefetch" href="/assets/js/12.44e7cb04.js"><link rel="prefetch" href="/assets/js/13.c977ea8f.js"><link rel="prefetch" href="/assets/js/14.3ca8fada.js"><link rel="prefetch" href="/assets/js/15.49fb8b22.js"><link rel="prefetch" href="/assets/js/16.f77d8666.js"><link rel="prefetch" href="/assets/js/17.793a78ce.js"><link rel="prefetch" href="/assets/js/18.e720ae74.js"><link rel="prefetch" href="/assets/js/19.b7f857dc.js"><link rel="prefetch" href="/assets/js/20.20a62293.js"><link rel="prefetch" href="/assets/js/21.04f12faf.js"><link rel="prefetch" href="/assets/js/22.dfdf7735.js"><link rel="prefetch" href="/assets/js/23.9b43db7d.js"><link rel="prefetch" href="/assets/js/24.c06fb8e6.js"><link rel="prefetch" href="/assets/js/26.6396c0d9.js"><link rel="prefetch" href="/assets/js/27.ae927678.js"><link rel="prefetch" href="/assets/js/28.1fb3c5c9.js"><link rel="prefetch" href="/assets/js/29.990fdc34.js"><link rel="prefetch" href="/assets/js/3.62dac171.js"><link rel="prefetch" href="/assets/js/30.53047d86.js"><link rel="prefetch" href="/assets/js/31.71fcf53c.js"><link rel="prefetch" href="/assets/js/32.9f8fcea9.js"><link rel="prefetch" href="/assets/js/33.75bbec8e.js"><link rel="prefetch" href="/assets/js/34.1fa01da7.js"><link rel="prefetch" href="/assets/js/35.10349e7e.js"><link rel="prefetch" href="/assets/js/36.3d117ae6.js"><link rel="prefetch" href="/assets/js/37.b4bf6da0.js"><link rel="prefetch" href="/assets/js/38.5b279f27.js"><link rel="prefetch" href="/assets/js/39.a98c8a8e.js"><link rel="prefetch" href="/assets/js/4.6c23dc08.js"><link rel="prefetch" href="/assets/js/40.47d6e933.js"><link rel="prefetch" href="/assets/js/41.62ed983b.js"><link rel="prefetch" href="/assets/js/42.62a3fbfa.js"><link rel="prefetch" href="/assets/js/5.6ad3abc9.js"><link rel="prefetch" href="/assets/js/6.cdcc581a.js"><link rel="prefetch" href="/assets/js/7.d57a0c3f.js"><link rel="prefetch" href="/assets/js/8.cc13f77a.js"><link rel="prefetch" href="/assets/js/9.c7fc3fdb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.98303e98.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">特辣的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/KangChangYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://kangchangyi.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/KangChangYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://kangchangyi.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>快速查阅</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>服务端入门ing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>其他</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/article/其他/零碎知识点普及.html" class="active sidebar-link">零碎知识点</a></li><li><a href="/article/其他/学长的踩坑之路.html" class="sidebar-link">这里是一份学长的就业指北</a></li><li><a href="/article/其他/学习方法梳理.html" class="sidebar-link">学习方法梳理</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>每月总结</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="零碎知识点"><a href="#零碎知识点" aria-hidden="true" class="header-anchor">#</a> 零碎知识点</h2> <h2 id="uniapp"><a href="#uniapp" aria-hidden="true" class="header-anchor">#</a> uniapp</h2> <p>uniapp 内置 HTML5+ 引擎，让 js 可以调用原生能力，但是小程序和 H5 平台没有 HTML5+ 规范，所以在小程序和 H5 中没法使用。</p> <ul><li>5+ RunTime 是对 HTML5+ 规范的实现。</li></ul> <p>HTML5+是一套 API，他打通了原生 API 和 JS API 的桥梁，可以理解为一个增强版的浏览器。uniapp 也是基于此实现的原生 api 的调用。
在普通 H5 中时通过 document.addEventListener 来监听原生扩展事件，但是 uniapp 中没有 document, 是通过另外一个事件监听的方法来实现，plus.globalEvent.addEventListener</p> <h2 id="骨架屏"><a href="#骨架屏" aria-hidden="true" class="header-anchor">#</a> 骨架屏</h2> <p>骨架屏可通过手写 HTML 和 CSS 实现，但是维护成本太大，每次修改页面都要同步的去修改骨架屏样式，还有用图片的实现方式，自动化目前比较好的就只有 page-skeleton-webpack-plugin。</p> <p>原理: 通过 puppeteer 在本地启动一个无头的 chrome 浏览器，在这个浏览器里面打开需要生成骨架屏的页面，然后这个插件就会递归遍历当前的 DOM 树，计算出哪些是文本块哪些是图片块，然后通过将这些块进行一个绘制，就生成了当前页面的骨架屏，保存之后就会在项目构建的时候插入到 HTML 里面。</p> <h2 id="小程序双线程模型"><a href="#小程序双线程模型" aria-hidden="true" class="header-anchor">#</a> 小程序双线程模型</h2> <p>小程序和普通的 Web 渲染模式不同，采用 Webview 线程渲染页面，JsCore线程执行 js 代码的双线程模型，避免了像在浏览器中 Js 引擎线程和 GUI 引擎线程互斥的问题，使其体验更接近原生 App。</p> <p>渲染线程和 js 逻辑层的通信由 Native 做中转，网络请求也由 Native 转发，页面更新机制和虚拟 DOM 类似，在逻辑层数据需要发生变化的时候，通过 setData 方法把数据从逻辑层传递到 Native，然后由 Native 对比前后差异对页面进行更新。</p> <h3 id="tip"><a href="#tip" aria-hidden="true" class="header-anchor">#</a> tip</h3> <p>浏览器每个页面为一个进程，每个进程有以下线程：</p> <ol><li>Js 引擎线程</li> <li>渲染进程</li> <li>定时器触发线程</li> <li>事件触发线程</li> <li>http请求线程</li></ol> <h2 id="postcss-解决移动端适配问题"><a href="#postcss-解决移动端适配问题" aria-hidden="true" class="header-anchor">#</a> PostCss 解决移动端适配问题</h2> <ol><li>使用 PostCss-px2rem 插件
原理：根据当前的屏幕宽度，然后给根节点设置一个合适的 font-size，并且将 css 中的 px 转换为 rem。</li></ol> <h2 id="移动端-1px-问题"><a href="#移动端-1px-问题" aria-hidden="true" class="header-anchor">#</a> 移动端 1px 问题</h2> <ol><li>使用 PostCss-write-svg 解决 1px border 的问题</li> <li>使用 border-image 配合媒体查询，在 dpr 是2 或者 3的时候使用 image。</li></ol> <h2 id="移动端开发注意事项"><a href="#移动端开发注意事项" aria-hidden="true" class="header-anchor">#</a> 移动端开发注意事项</h2> <ol><li>在 head 中加入 meta 标签，对 viewport 进行一个设置，设置其 width = device-width，禁用用户的缩放操作，初始缩放值为 1。</li></ol> <h2 id="ios-android-和-h5-的通信原理"><a href="#ios-android-和-h5-的通信原理" aria-hidden="true" class="header-anchor">#</a> ios Android 和 H5 的通信原理</h2> <ol><li>js 方面使用 alert，prompt，confirm 进行弹窗，然后 Native 对弹窗进行拦截，并且获取其中的值。</li> <li>js 方通过创建 iframe 并对其设置 src，并且对其隐藏，然后 Native 同样可以进行拦截，判断 src 是否在提前约定好的通信规则中，如果是则获取其中的值（使用 iframe 不会引起页面刷新）
这个方案首先需要指定一套URL规则。</li> <li>Native 可以通过 webview 的 api 直接执行 js 代码，或者在其中注入方法（因为原生端有 JavaScriptCore，可以解析 js 代码）。</li> <li>jsBridge，其实就是一个封装好的，基于 URL 这个方法和原生进行交互的一个库。</li></ol> <h2 id="性能优化可以做的事情"><a href="#性能优化可以做的事情" aria-hidden="true" class="header-anchor">#</a> 性能优化可以做的事情</h2> <h3 id="代码层面优化"><a href="#代码层面优化" aria-hidden="true" class="header-anchor">#</a> 代码层面优化</h3> <ol><li>减少 DOM 的访问次数，将 DOM 尽可能的存储到变量中访问。（原因：js引擎 和 渲染引擎之间的通信存在开销）</li> <li>减少回流（重排）的次数，回流必定引起重绘。</li></ol> <p>导致回流的操作有：</p> <ul><li>DOM 树的变化（节点的增删改）</li> <li>浏览器窗口的大小改变</li> <li>元素的 offset 和 client 相关的属性，因为浏览器需要去计算获得。</li></ul> <p>解决办法：</p> <ul><li>尽量把多次 DOM 操作放在同一个时间内执行，这也是框架替我们做的事情。</li> <li>如果要多次插入 DOM 节点，先放到 Document.fragument 里面然后一次性插入。</li> <li>避免多次读取例如 offset 和 client 之类的属性。</li> <li>将复杂的动效元素用绝对定位和正常流隔离开</li></ul> <ol start="3"><li>将 Js 文件放在 css 渲染的最后面（SPA 项目无效）</li></ol> <h3 id="感知速度优化"><a href="#感知速度优化" aria-hidden="true" class="header-anchor">#</a> 感知速度优化</h3> <ol><li>骨架屏</li> <li>loading 过渡动画</li> <li>如果在页面进入的时候有大量的计算密集型的操作，可能会导致渲染阻塞，可以使用 Web Worker 去执行一部分的代码，避免阻塞。
Web Worker知识点：</li></ol> <ul><li>Worker 的兼容性为 IE10+ 96%;</li> <li>通过 Web Worker 的 postMessage 方法给 worker 传递数据，子线程也同样。</li> <li>主线程使用 worker 实例的 onmessage 方法指定监听函数。</li> <li>worker 内部 通过 addEventListener 监听 onmessage 事件，可在全局对象 this 上监听或者不写也可以。</li> <li>如果 worker 内部需要加载资源有专门的方法：importScripts('..')，可以同时加载多个脚本。</li> <li>主线程可以通过监听 worker 对象的 onerror 事件处理错误。</li> <li>使用完毕之后需要关闭，不然会一直占据资源。 主线程关闭：worker.terminate()，worker 自己关闭 this.close()</li></ul> <h3 id="构建层面优化"><a href="#构建层面优化" aria-hidden="true" class="header-anchor">#</a> 构建层面优化</h3> <ol><li>Tree-shaking
原理：在构建时不打包无用代码，减少文件体积，基于 ES6 的静态模块加载。</li> <li>Scope-hoisting
原理：检查 import 链，将只被使用了一次的模块合并到一起。</li> <li>Code-splitting
原理：将代码分离到不同的 bundle，然后就可以对代码进行按需加载，不用一下子就加载所有文件。</li> <li>使用前端框架的 SSR，不用像 SPA 一样等 JS 执行完了再挂载 DOM，加快首屏渲染，当时如果流量大的情况下需要考虑服务器的压力。</li> <li>使用浏览器缓存（强缓存，协商缓存）</li> <li>图片及代码的压缩</li></ol> <h3 id="其他"><a href="#其他" aria-hidden="true" class="header-anchor">#</a> 其他</h3> <ol><li>CDN，在 CDN 上存储静态资源文件，减少文件请求时间。
CDN的本质上是将媒体资源，动静态图片（Flash），HTML，CSS，JS等等内容缓存到距离你更近的IDC，从而让用户进行共享资源，实现缩减站点间的响应时间等等需求，而网游加速器的本质则是通过建立高带宽机房，架设多节点服务器来为用户进行加速。</li></ol> <h1 id="css"><a href="#css" aria-hidden="true" class="header-anchor">#</a> CSS</h1> <h2 id="grid-布局"><a href="#grid-布局" aria-hidden="true" class="header-anchor">#</a> Grid 布局</h2> <h3 id="基础"><a href="#基础" aria-hidden="true" class="header-anchor">#</a> 基础</h3> <p>使用</p> <div class="language-css extra-class"><pre class="language-css"><code>&lt;!-- 块级 grid --&gt;
<span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
&lt;!-- 行内 grid --&gt;
<span class="token property">display</span><span class="token punctuation">:</span> inline-grid<span class="token punctuation">;</span>
</code></pre></div><p>属性为一个元素添加 Grid 布局，其中 Grid 布局的最外层元素称为容器，容器的最外层子元素被称为项目。</p> <h3 id="相关属性"><a href="#相关属性" aria-hidden="true" class="header-anchor">#</a> 相关属性</h3> <ul><li>定义行宽列高</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
<span class="token property">grid-template-columns</span><span class="token punctuation">:</span> 50px 50px 50px<span class="token punctuation">;</span>
<span class="token property">grid-template-rows</span><span class="token punctuation">:</span> 100px 100px 100px<span class="token punctuation">;</span>
</code></pre></div><p>上面两行代码定义了一个三行三列的 grid 容器，并且其中列宽均是 50px，行高 均是 100px，单位还可以是百分比。</p> <ul><li>使用 repeat() 函数替代重复值
repeat() 函数用法：</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
<span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token function">repeat</span><span class="token punctuation">(</span>3<span class="token punctuation">,</span> 50px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token property">grid-template-rows</span><span class="token punctuation">:</span> <span class="token function">repeat</span><span class="token punctuation">(</span>3<span class="token punctuation">,</span> 100px<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>第一个参数是重复次数，第二个是要重复的值。</p> <ul><li>auto-fill 关键字
有时候容器的宽度是不固定的，但是项目的宽度是固定的，如果我们想每一行尽可能的多容纳一些项目，则可以使用 <code>auto-fill</code></li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
<span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token function">repeat</span><span class="token punctuation">(</span>auto-fill<span class="token punctuation">,</span> 50px<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>fr 关键字
<code>fr</code> 关键字类似于 <code>display</code> 布局中的  <code>flex</code> 属性，用户表示项目之间的比例关系，例如 <code>fr: 1</code> 和 <code>fr: 2</code>，则 2 是 1 的两倍。</li></ul> <p>可以和绝对单位配合使用，非常方便。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
<span class="token property">grid-template-columns</span><span class="token punctuation">:</span> 150px 1fr 2fr<span class="token punctuation">;</span>
</code></pre></div><p>第三列的宽度是第一列的两倍。</p> <ul><li>minmax() 函数
使用 minman() 函数产生一个长度范围，接受两个参数，最大值和最小值。</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">grid-template-columns</span><span class="token punctuation">:</span> 1fr 1fr <span class="token function">minman</span><span class="token punctuation">(</span>100px<span class="token punctuation">,</span> 1fr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>表示不小于 100px，不大于 1fr。</p> <ul><li>auto 关键字
使用了 auto 关键字的对应宽和高将会根据剩余宽度自适应大小。</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">grid-template-columns</span><span class="token punctuation">:</span> 100px auto 100px<span class="token punctuation">;</span>
</code></pre></div><p>以上代码实现了两边固定，中间自适应大小的布局。</p> <ul><li>网格线名称
通过在 <code>grid-template-columns</code> 和 <code>grid-template-rows</code> 中使用方括号，给每一根网格线指定名称，方便以后引用。</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token property">grid-template-columns</span><span class="token punctuation">:</span> [c1] 100px [c2] 100px [c3] auto [c4]<span class="token punctuation">;</span>
<span class="token property">grid-template-rows</span><span class="token punctuation">:</span> [r1] 100px [r2] 100px [r3] auto [r4]<span class="token punctuation">;</span>
</code></pre></div><p>上面代码，第一根竖网格线名称为 <code>c1</code>。</p> <ul><li>行间距与列间距
通过 <code>grid-row-gap</code> 和 <code>grid-column-gap</code> 设置行与行，列与列的间距。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/article/服务端入门ing/nginx入门.html" class="prev">
          Nginx 入门
        </a></span> <span class="next"><a href="/article/其他/学长的踩坑之路.html">
          这里是一份学长的就业指北
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9bc466e0.js" defer></script><script src="/assets/js/2.bc0da09f.js" defer></script><script src="/assets/js/25.95bb47b2.js" defer></script>
  </body>
</html>
