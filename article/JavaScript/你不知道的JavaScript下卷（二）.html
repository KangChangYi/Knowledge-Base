<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>你不知道的 JavaScript 下卷知识点整理（二） | 特辣的博客</title>
    <meta name="description" content="Step by step">
    
    
    <link rel="preload" href="/assets/css/0.styles.98303e98.css" as="style"><link rel="preload" href="/assets/js/app.9bc466e0.js" as="script"><link rel="preload" href="/assets/js/2.bc0da09f.js" as="script"><link rel="preload" href="/assets/js/23.9b43db7d.js" as="script"><link rel="prefetch" href="/assets/js/10.7f9b2c60.js"><link rel="prefetch" href="/assets/js/11.b7ec9672.js"><link rel="prefetch" href="/assets/js/12.44e7cb04.js"><link rel="prefetch" href="/assets/js/13.c977ea8f.js"><link rel="prefetch" href="/assets/js/14.3ca8fada.js"><link rel="prefetch" href="/assets/js/15.49fb8b22.js"><link rel="prefetch" href="/assets/js/16.f77d8666.js"><link rel="prefetch" href="/assets/js/17.793a78ce.js"><link rel="prefetch" href="/assets/js/18.e720ae74.js"><link rel="prefetch" href="/assets/js/19.b7f857dc.js"><link rel="prefetch" href="/assets/js/20.20a62293.js"><link rel="prefetch" href="/assets/js/21.04f12faf.js"><link rel="prefetch" href="/assets/js/22.dfdf7735.js"><link rel="prefetch" href="/assets/js/24.c06fb8e6.js"><link rel="prefetch" href="/assets/js/25.95bb47b2.js"><link rel="prefetch" href="/assets/js/26.6396c0d9.js"><link rel="prefetch" href="/assets/js/27.ae927678.js"><link rel="prefetch" href="/assets/js/28.1fb3c5c9.js"><link rel="prefetch" href="/assets/js/29.990fdc34.js"><link rel="prefetch" href="/assets/js/3.62dac171.js"><link rel="prefetch" href="/assets/js/30.53047d86.js"><link rel="prefetch" href="/assets/js/31.71fcf53c.js"><link rel="prefetch" href="/assets/js/32.9f8fcea9.js"><link rel="prefetch" href="/assets/js/33.75bbec8e.js"><link rel="prefetch" href="/assets/js/34.1fa01da7.js"><link rel="prefetch" href="/assets/js/35.10349e7e.js"><link rel="prefetch" href="/assets/js/36.3d117ae6.js"><link rel="prefetch" href="/assets/js/37.b4bf6da0.js"><link rel="prefetch" href="/assets/js/38.5b279f27.js"><link rel="prefetch" href="/assets/js/39.a98c8a8e.js"><link rel="prefetch" href="/assets/js/4.6c23dc08.js"><link rel="prefetch" href="/assets/js/40.47d6e933.js"><link rel="prefetch" href="/assets/js/41.62ed983b.js"><link rel="prefetch" href="/assets/js/42.62a3fbfa.js"><link rel="prefetch" href="/assets/js/5.6ad3abc9.js"><link rel="prefetch" href="/assets/js/6.cdcc581a.js"><link rel="prefetch" href="/assets/js/7.d57a0c3f.js"><link rel="prefetch" href="/assets/js/8.cc13f77a.js"><link rel="prefetch" href="/assets/js/9.c7fc3fdb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.98303e98.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">特辣的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/KangChangYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://kangchangyi.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/KangChangYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://kangchangyi.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/article/JavaScript/JavaScript数据结构和算法数组整理.html" class="sidebar-link">JavaScript 数据结构和算法—数组整理</a></li><li><a href="/article/JavaScript/作用域和闭包（一）.html" class="sidebar-link">作用域和闭包（一）</a></li><li><a href="/article/JavaScript/作用域和闭包（二）.html" class="sidebar-link">作用域和闭包（二）</a></li><li><a href="/article/JavaScript/你不知道的JavaScript下卷（一）.html" class="sidebar-link">你不知道的 JavaScript 下卷知识点整理（一）</a></li><li><a href="/article/JavaScript/你不知道的JavaScript下卷（二）.html" class="active sidebar-link">你不知道的 JavaScript 下卷知识点整理（二）</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>快速查阅</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>服务端入门ing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>每月总结</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="你不知道的-javascript-下卷知识点整理（二）"><a href="#你不知道的-javascript-下卷知识点整理（二）" aria-hidden="true" class="header-anchor">#</a> 你不知道的 JavaScript 下卷知识点整理（二）</h2> <p>整理的第二部分</p> <p>部分简单的内容举🌰后不再赘述（知识点全都写出来真的很多！😅）。</p> <h1 id="第一章——es-现在与未来"><a href="#第一章——es-现在与未来" aria-hidden="true" class="header-anchor">#</a> 第一章——ES? 现在与未来</h1> <p>这一章主要讲述了关于 “ES版本” 有关的内容以及第一部分整理的末尾提到的 transpiling</p> <h2 id="transpiling"><a href="#transpiling" aria-hidden="true" class="header-anchor">#</a> transpiling</h2> <p>想要使用新特性但浏览器尚未支持，解决这个矛盾的答案就是工具化，就是一种称为 transpiling 的技术，其思路就是将 ES6 代码转换为可以在 ES5 环境下工作的代码</p> <p>下面两个工具都可以做到 transpiling</p> <ul><li><a href="https://babeljs.io/" target="_blank" rel="noopener noreferrer">Babel<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
从 ES6+ 编译到 ES5</li> <li><a href="https://github.com/google/traceur-compiler" target="_blank" rel="noopener noreferrer">Traceur<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
将 ES6、ES7 以及后续版本转换到 ES5</li></ul> <h2 id="shim-polyfill"><a href="#shim-polyfill" aria-hidden="true" class="header-anchor">#</a> shim/polyfill</h2> <p>polyfill会为新环境中的行为定义在旧环境中的等价行为。语法不能polyfill，而API可以。</p> <p>举例来说，Object.is(..) 是用于检查两个值严格相等的新 API，并且不像 === 在处理 NaN 和 -0 时有例外情况，对Object.is(..) 应用polyfill:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Object<span class="token punctuation">.</span>is<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span>is <span class="token operator">=</span> <span class="token function">functino</span><span class="token punctuation">(</span><span class="token parameter">v1<span class="token punctuation">,</span> v2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">// 检查 -0</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>v1 <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> v2 <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> v1 <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">/</span> v2<span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       <span class="token comment">// 检查 NaN</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>v1 <span class="token operator">!==</span> v1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> v2 <span class="token operator">!==</span> v2<span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       <span class="token comment">// 其余情况</span>
       <span class="token keyword">return</span> v1 <span class="token operator">===</span> v2
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这段代码最外层的 if 语句，它表示这段代码在未定义这个 API 的旧环境有效。</p> <h1 id="第二章——es6-语法"><a href="#第二章——es6-语法" aria-hidden="true" class="header-anchor">#</a> 第二章——ES6 语法</h1> <h2 id="_2-1-块作用域声明-let-const"><a href="#_2-1-块作用域声明-let-const" aria-hidden="true" class="header-anchor">#</a> 2.1 块作用域声明 &amp; let &amp; const</h2> <h3 id="_2-1-1-块作用域"><a href="#_2-1-1-块作用域" aria-hidden="true" class="header-anchor">#</a> 2.1.1 块作用域</h3> <p>在Es6以前，创建一个块作用域的办法是IIFE：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token constant">IIFE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>  <span class="token comment">// 2</span>
</code></pre></div><p>但现在，我们只需要使用 { .. } / let / const 就可以创建一个 块作用域（block scoping）。</p> <ul><li>显式的块作用域：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>  <span class="token comment">// 2</span>
</code></pre></div><ul><li>隐式的块作用域：
🤔思考下面的代码，回答哪些变量只存在 if 语句内部？哪些变量只存在 for 循环内部？</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>a <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">*</span> a<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span>  <span class="token comment">// 6</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> a <span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> b <span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">// 12 13 14 15 16</span>

    <span class="token keyword">let</span> c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 8</span>
<span class="token punctuation">}</span>
</code></pre></div><p>答案是 if 语句内部只包含 b 和 c，for 循环内部只包含 i 和 j 。</p> <h3 id="_2-1-2-let-声明"><a href="#_2-1-2-let-声明" aria-hidden="true" class="header-anchor">#</a> 2.1.2 let 声明</h3> <p>let 声明的特点除了创建隐式的块作用域外，还有一个特点是 TDZ （暂时性死区）
过早的访问 let 声明将会导致引用错误（ReferenceError），严格来说叫 TDZ 错误</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ReferenceError</span>

<span class="token keyword">var</span> a<span class="token punctuation">;</span>
<span class="token keyword">let</span> b<span class="token punctuation">;</span>
</code></pre></div><p>使用 let + for 的组合将会使得 每次循环迭代都会封闭一个新的 i。
🤔：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 0 1 2 3 4 5 6 7 8 9</span>
</code></pre></div><p>var + for 却是这样的：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 十次 10</span>
</code></pre></div><p>循环迭代内部创建的闭包封闭的是每次迭代的变量，let 声明创建的块作用域使得每次创建的 i 都是相互隔离的，而 var 声明导致外层作用域只有一个 i ，每次迭代都把这个 i 封闭进去，而不是一个新的 i 。</p> <h3 id="_2-1-3-const-声明"><a href="#_2-1-3-const-声明" aria-hidden="true" class="header-anchor">#</a> 2.1.3 const 声明</h3> <p>const 声明的特点：</p> <ul><li>块作用域</li> <li>TDZ</li> <li>创建常量
but ，如果值是复杂值，比如 Array 和 Object 则仍然可以修改。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4,5];</span>
a <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>  <span class="token comment">// TypeError!</span>
</code></pre></div><h2 id="_2-2-spread-rest-运算符"><a href="#_2-2-spread-rest-运算符" aria-hidden="true" class="header-anchor">#</a> 2.2 spread / rest 运算符</h2> <p>ES6的新运算符 ... ,通常成为 spread 或 rest 运算符 （展开或收集）运算符，它是哪一种取决于它用在哪。🤔</p> <h3 id="_2-2-1-spread"><a href="#_2-2-1-spread" aria-hidden="true" class="header-anchor">#</a> 2.2.1 spread</h3> <p>举个栗子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 2 3;</span>
</code></pre></div><p>当 ... 运算符用在任何iterable对象之前时（比如数组，伪数组），它会展开其中的值。</p> <h3 id="_2-2-2-rest"><a href="#_2-2-2-rest" aria-hidden="true" class="header-anchor">#</a> 2.2.2 rest</h3> <p>再举个栗子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span> <span class="token operator">...</span>c</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 1 2 [3,4,5];</span>
</code></pre></div><p>现在 ... 运算符的作用是收集剩下的参数。
tip：
... 运算符用于收集时只能在最后出现。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 错误示范</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> <span class="token operator">...</span>b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Rest parameter must be last formal parameter </span>
</code></pre></div><h2 id="_2-3-默认参数值"><a href="#_2-3-默认参数值" aria-hidden="true" class="header-anchor">#</a> 2.3 默认参数值</h2> <p>在ES6以前设定函数默认参数是这样的：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   a <span class="token operator">=</span> a <span class="token operator">||</span> <span class="token number">10</span><span class="token punctuation">;</span>
   b <span class="token operator">=</span> b <span class="token operator">||</span> <span class="token number">20</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a <span class="token operator">+</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 30</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">)</span>    <span class="token comment">// 11</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">5</span> <span class="token punctuation">)</span>       <span class="token comment">// 25</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">)</span> <span class="token comment">// 16</span>
</code></pre></div><ul><li>当传入的参数为 ‘假’ 值时，默认参数值有效。（ ‘假’ 值见第一部分 2.1.3）
现在的默认参数值（ES6）：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">20</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a <span class="token operator">+</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// 30</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 11</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 6</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 25</span>
<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 5  &lt;- null 被强制转换为 0</span>
</code></pre></div><p>此外默认参数值还可以是各种表达式、函数表达式。</p> <h2 id="_2-4-解构"><a href="#_2-4-解构" aria-hidden="true" class="header-anchor">#</a> 2.4  解构</h2> <p>ES6引入的新语法特性——解构，或者理解成——结构化赋值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
     x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
     y<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
     z<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">;</span>  <span class="token comment">// 数组解构</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>  <span class="token comment">// 对象解构</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1 2 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1 2 3</span>
</code></pre></div><p>tip:解构语法可用于解构函数参数</p> <h3 id="_2-4-1-对象属性赋值模式"><a href="#_2-4-1-对象属性赋值模式" aria-hidden="true" class="header-anchor">#</a> 2.4.1 对象属性赋值模式</h3> <p>从上面的栗子可以看到对象解构时赋值给同名变量的解构方法，但如果要赋值给非同名变量则需要：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">{</span> x <span class="token punctuation">:</span> bar<span class="token punctuation">,</span> y <span class="token punctuation">:</span> baz<span class="token punctuation">,</span> z <span class="token punctuation">:</span> bam <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> bar<span class="token punctuation">,</span> baz<span class="token punctuation">,</span> bam <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1 2 3</span>
</code></pre></div><p>注意：对象解构赋值的语法模式是 source：target，
但我们常用的语法模式是 target：source，不能搞错。🤔</p> <h3 id="_2-4-2-重复赋值"><a href="#_2-4-2-重复赋值" aria-hidden="true" class="header-anchor">#</a> 2.4.2 重复赋值</h3> <p>对象解构允许多次列出同一个源属性，举个🌰：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token constant">X</span><span class="token punctuation">,</span> a<span class="token punctuation">:</span> <span class="token constant">Y</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> a <span class="token punctuation">:</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token constant">X</span><span class="token punctuation">;</span>  <span class="token comment">// 1</span>
<span class="token constant">Y</span><span class="token punctuation">;</span>  <span class="token comment">// 1</span>
</code></pre></div><h3 id="_2-4-3-默认值赋值"><a href="#_2-4-3-默认值赋值" aria-hidden="true" class="header-anchor">#</a> 2.4.3 默认值赋值</h3> <p>语法与前面的默认函数参数值类似的 = 语法，用来提供赋值的默认值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> baz <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> a<span class="token punctuation">:</span> bar <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> bam <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>

baz<span class="token punctuation">;</span>   <span class="token comment">// 1</span>
bar<span class="token punctuation">;</span>   <span class="token comment">// 6</span>
bam<span class="token punctuation">;</span>   <span class="token comment">// 1</span>
</code></pre></div><h3 id="_2-4-4-解构并重组"><a href="#_2-4-4-解构并重组" aria-hidden="true" class="header-anchor">#</a> 2.4.4 解构并重组</h3> <p>为嵌套对象属性设置默认值的技巧：使用对象解构的 ‘重组’ 技术。<br>
例题：假设场景，已有系统默认设置，现在要将用户设置和默认设置合并，用户设置没有的部分使用默认设置设定，已有的部分采用用户的设置。</p> <ul><li>默认设置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token keyword">default</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        remove<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        enable<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        instance<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    log<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        warn<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        error<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>用户设置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        remove<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        instance<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>现在，通过解构并重组实现：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 把default合并进config    带默认值的赋值解构</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        remove <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>remove<span class="token punctuation">,</span>
        instance <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>instance<span class="token punctuation">,</span>
        enable <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>enable
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    log<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        warn <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>warn<span class="token punctuation">,</span>
        error <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>error
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> config<span class="token punctuation">;</span>

config <span class="token operator">=</span> <span class="token punctuation">{</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span> remove<span class="token punctuation">,</span> instance<span class="token punctuation">,</span> enable<span class="token punctuation">}</span><span class="token punctuation">,</span>
    log<span class="token punctuation">:</span> <span class="token punctuation">{</span> warn<span class="token punctuation">,</span> error<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>是不是很简单？ 😁</p> <h2 id="_2-5-太多，太少，刚刚好"><a href="#_2-5-太多，太少，刚刚好" aria-hidden="true" class="header-anchor">#</a> 2.5 太多，太少，刚刚好</h2> <p>这一部分主要讲了：数组解构和对象解构时并不需要把所有的值都赋值一次。</p> <h2 id="_2-6-对象字面量扩展"><a href="#_2-6-对象字面量扩展" aria-hidden="true" class="header-anchor">#</a> 2.6 对象字面量扩展</h2> <p>ES6 为普通 { .. } 对象字面量新增了几个重要的扩展，简单举例。</p> <h3 id="_2-6-1-简介属性"><a href="#_2-6-1-简介属性" aria-hidden="true" class="header-anchor">#</a> 2.6.1 简介属性</h3> <p>如果你定义的属性与变量名相同，就可以用简写代替。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
    o <span class="token operator">=</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">:</span> x<span class="token punctuation">,</span>
        y<span class="token punctuation">:</span> y<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 简写 <span class="token operator">--</span><span class="token operator">&gt;</span>

<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
    o <span class="token operator">=</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">,</span>
        y<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="_2-6-2-简写方法"><a href="#_2-6-2-简写方法" aria-hidden="true" class="header-anchor">#</a> 2.6.2 简写方法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 老方法 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">x</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">y</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 简写 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>👋注意！简写意味着匿名函数，所以在需要递归以及事件绑定/解绑定的时候不要使用简写。</p> <h3 id="_2-6-3-计算属性名"><a href="#_2-6-3-计算属性名" aria-hidden="true" class="header-anchor">#</a> 2.6.3 计算属性名</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> prefix <span class="token operator">=</span> <span class="token string">&quot;user_&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">bax</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

o<span class="token punctuation">[</span> prefix <span class="token operator">+</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
o<span class="token punctuation">[</span> prefix <span class="token operator">+</span> <span class="token string">&quot;bar&quot;</span> <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-6-4-设定-prototype"><a href="#_2-6-4-设定-prototype" aria-hidden="true" class="header-anchor">#</a> 2.6.4 设定[[Prototype]]</h3> <p>详细介绍见上第二部分</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    __proto__<span class="token punctuation">:</span> o1<span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>这里 o2 的 [[Prototype]] 连接到了 o1。
要为已经存在的对象设定 [[Prototype]] 使用 ES6 工具 Object.setPrototypeOf(..):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">setPrtotypeOf</span><span class="token punctuation">(</span> o2<span class="token punctuation">,</span> o1 <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-6-5-super-对象"><a href="#_2-6-5-super-对象" aria-hidden="true" class="header-anchor">#</a> 2.6.5 super 对象</h3> <p>通常super对象用于类相关，但是 JavaScript 是原型类而非类对象的本质，所以 super 对于普通对象的简洁方法一样有效：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;o1:foo&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;o2:foo&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span> o2<span class="token punctuation">,</span> o1 <span class="token punctuation">)</span><span class="token punctuation">;</span>
o2<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// o1.foo</span>
             <span class="token comment">// o2.foo</span>
</code></pre></div><p>👋注意！这里的 super 只能在简写方法中出现，不允许在普通函数表达式属性中出现，并且只允许以 super.xxx , 不能像在继承时的用法 super() 一样。</p> <h2 id="_2-7-模板字面量"><a href="#_2-7-模板字面量" aria-hidden="true" class="header-anchor">#</a> 2.7 模板字面量</h2> <p>模板字面量是 ES6 的新特性，书中作者将他重命名为 ‘插入字符串字面量’，这样比较符合他的特点。</p> <p>模板字面量使用 ` 符号作为界定符，可将表达式插入在字符串中，它会被自动解析求值：</p> <ul><li>老方法：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> fName <span class="token operator">=</span> <span class="token string">'k'</span><span class="token punctuation">,</span>lName <span class="token operator">=</span> <span class="token string">'y'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> fName <span class="token operator">+</span> <span class="token string">'c'</span> <span class="token operator">+</span> lName<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 'kcy'</span>
</code></pre></div><ul><li>ES6新方法</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> fName <span class="token operator">=</span> <span class="token string">'k'</span><span class="token punctuation">,</span>lName <span class="token operator">=</span> <span class="token string">'y'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">c</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 'kcy'</span>
</code></pre></div><p>👆可以看到，一组字符使用 `` 包裹，其中的表达式写在 ${..} 中，</p> <h3 id="_2-7-1-插入表达式"><a href="#_2-7-1-插入表达式" aria-hidden="true" class="header-anchor">#</a> 2.7.1 插入表达式</h3> <p>在模板字面量的 ${..} 内可以出现任何合法的表达式，包括函数调用，甚至是其他的模板字面量。
🤔：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">upper</span> <span class="token operator">=</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> val<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> who <span class="token operator">=</span> <span class="token string">&quot;reader&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">i am </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">upper</span><span class="token punctuation">(</span> who <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> text <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &quot;i am READER!&quot; </span>
</code></pre></div><p>不推荐在模板字面量中插入模板字面量，就不举例说明了。</p> <h3 id="_2-7-2-标签模板字面量"><a href="#_2-7-2-标签模板字面量" aria-hidden="true" class="header-anchor">#</a> 2.7.2 标签模板字面量</h3> <p>这个说实话我觉得有点奇技淫巧的感觉，或者是我现在想不到它的应用场景，下面举例:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">strings<span class="token punctuation">,</span> <span class="token operator">...</span>values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> strings <span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> values <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> desc <span class="token operator">=</span> <span class="token string">&quot;awesome&quot;</span><span class="token punctuation">;</span>
foo<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Everything is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>desc<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">// [&quot;Everything is&quot;, &quot;!&quot;]</span>
<span class="token comment">// [&quot;awesome&quot;]</span>
</code></pre></div><p>书上的表达有点奇怪，说一下我自己的理解：</p> <p>首先看到最奇怪的部分是 foo`` 这一部分，这是一类不需要 ( .. ) 的特殊函数调用，被调用的 foo 函数的参数就是模板字面量里面的内容。</p> <p>其中 foo 的第一个参数 strings 是模板字面量中普通字符串组成的数组，所以 strings 数组有两个值：&quot;Everything is&quot; 和 &quot;!&quot;.</p> <p>例子中使用 ... 运算符将其余参数收集到了 values 数组中，获取到的结果为 &quot;awesome&quot;，但其实不需要使用 ...values 也可以获取到模板字面量中的结果，例子为了方便起见。</p> <h2 id="_2-8-箭头函数"><a href="#_2-8-箭头函数" aria-hidden="true" class="header-anchor">#</a> 2.8 箭头函数</h2> <p>ES6 实在太多，阮一峰前辈的 ES6 也看了，这边讲的 ES6 也看了，有时间再整理😅。</p> <p>未完待续...</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/article/JavaScript/你不知道的JavaScript下卷（一）.html" class="prev">
          你不知道的 JavaScript 下卷知识点整理（一）
        </a></span> <span class="next"><a href="/article/Vue/Vue原理之变化侦测.html">
          Vue 原理之变化侦测
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9bc466e0.js" defer></script><script src="/assets/js/2.bc0da09f.js" defer></script><script src="/assets/js/23.9b43db7d.js" defer></script>
  </body>
</html>
