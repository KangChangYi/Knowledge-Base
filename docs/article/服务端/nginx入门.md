# Nginx 基础

## 1 什么是 Nginx
是一个高性能 http 和 反向代理服务器，其特点是高并发，占用内存低。

### 1.2 正向代理概念
客户端依赖代理服务器访问互联网中的资源，这被称之为正向代理，客户端需要对浏览器进行配置。

### 1.3 反向代理概念
客户端对反向代理是无感知的，因为客户端不需要任何配置。

客户端将请求发送到代理服务器，由代理服务器选择目标服务器对请求进行转发，目标服务器处理请求之后，代理服务器将数据返回给客户端，通常对客户端暴露的是代理服务器，隐藏了真实服务器的 ip。

### 1.4 负载均衡概念
通过增加服务器的数量，将请求单个服务器，变为将请求分发到多个服务器上。

实现负载均衡，则需要一个反向代理服务器，客户端请求代理服务器，代理服务器将请求（负载）均衡的转发到多个目标服务器上。这个过程，就叫负载均衡。

### 1.5 动静分离
通过将静态资源（html、css、js）和动态资源（jsp、servlet）放到不同的服务器，由不同服务器进行解析，加快网页解析过程，解决单一服务器解析压力过大的问题。

## 2 nginx 指令及配置文件

### 2.1 nginx 常用命令
使用命令要先进入 nginx 目录，/usr/local/nginx/sbin 下。

1. 查看 nginx 版本号： `./nginx -v`

2. 启动 nginx：`./nginx`

3. 关闭 nginx：`./nginx -s stop`

4. 重新加载 nginx：`./nginx -s reload`

### 2.2 nginx 配置文件 

nginx.conf 配置文件共有三个部分：

1. 全局块

从配置文件开始到 events 之间的内容，叫全局块，会设置一些影响 nginx 服务器整体运行的配置指令。

2. events 块

events 配置影响 nginx 服务器与用户的网络连接。

3. http 块

是 nginx 中配置最频繁的地方，http 块又可以分为 server 块和 http 全局块。

+ server 块

+ http 全局块


## nginx 配置实践
首先进入 nginx 的目录 conf 下，打开 nginx.conf 配置文件。

看到修改第一个 server 块中的内容，修改监听的端口（listen）和将要处理请求的主机地址，修改完保存后重启 nginx 服务，让新的配置生效。

<img src="/images/Nginx入门/nginx-confg-1.png" style="width:300px">

随后在浏览器中输入主机地址以及端口号，出现以下内容表示 nginx 启动成功。

<img src="/images/Nginx入门/nginx-success-page.png" style="width:300px">


## mark 
ngxin 想要配置反向代理，使用默认的 80 端口进行转发，隐藏掉域名后的端口号，但是遇到一个血坑，因为防火墙没有开放 80 端口，让我搞了半天。tmd